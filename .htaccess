RewriteEngine On

# Ensure HTTPS
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Prevent directory listing
Options -Indexes

# Route everything to index.php if it's not a real file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]

# Protect sensitive files
<FilesMatch "^\.(env|git|composer|yml|json|lock)$">
    Require all denied
</FilesMatch>

# Protect includes
<FilesMatch "^(composer\.json|composer\.lock|package\.json)$">
    Require all denied
</FilesMatch>
